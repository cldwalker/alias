<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Alias::Validator [RDoc Documentation]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          Alias::Validator
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../files/lib/alias/validator_rb.html">lib/alias/validator.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>Object</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            Creates validations for use with <a
            href="Creator.html#M000011">Alias::Creator.valid</a>.
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000010">default_validators</a></li>
              <li><a href="#M000007">new</a></li>
              <li><a href="#M000009">register_validators</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000008">validate</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='class-list'>
              <h2>Classes and Modules</h2>
              Class <a href="Validator/InvalidValidatorError.html" class="link">Alias::Validator::InvalidValidatorError</a><br />
              Class <a href="Validator/MissingConditionError.html" class="link">Alias::Validator::MissingConditionError</a><br />
            </div>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>message</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>validation_proc</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>validators</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      Hash of registered validators.
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='public-class method' id='method-M000010'>
                <a name='M000010'>      </a>
                <div class='synopsis'>
                  <span class='name'>default_validators</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Default validators are :constant, :class, :instance_method and
                  :class_method.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000010-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000010-source'><span class="ruby-comment cmt"># File lib/alias/validator.rb, line 66</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">default_validators</span>&#x000A;        [&#x000A;          {<span class="ruby-identifier">:key=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">:constant</span>, <span class="ruby-identifier">:if</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">any_const_get</span>(<span class="ruby-identifier">e</span>) }, <span class="ruby-identifier">:message=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;Constant '#{e}' not created since it doesn't exist&quot;</span>}},&#x000A;          {<span class="ruby-identifier">:key=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">:class</span>, <span class="ruby-identifier">:if</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> ((<span class="ruby-identifier">klass</span> = <span class="ruby-identifier">any_const_get</span>(<span class="ruby-identifier">e</span>)) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Module</span>)) },&#x000A;            <span class="ruby-identifier">:message=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;Alias for class '#{e}' not created since the class doesn't exist&quot;</span>}},&#x000A;          {<span class="ruby-identifier">:key=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">:instance_method</span>, <span class="ruby-identifier">:if</span>=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">instance_method?</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">e</span>) },&#x000A;            <span class="ruby-identifier">:message=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;Alias for instance method '#{e[0]}.#{e[1]}' not created since it doesn't exist&quot;</span> }},&#x000A;          {<span class="ruby-identifier">:key=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">:class_method</span>, <span class="ruby-identifier">:if</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">class_method?</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">e</span>) },&#x000A;            <span class="ruby-identifier">:message=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;Alias for class method '#{e[0]}.#{e[1]}' not created since it doesn't exist&quot;</span> }}&#x000A;        ]&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M000007'>
                <a name='M000007'>      </a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(options={})</span>
                </div>
                <div class='description'>
                  <p>
                  Options are described in <a
                  href="Creator.html#M000011">Alias::Creator.valid</a>.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000007-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000007-source'><span class="ruby-comment cmt"># File lib/alias/validator.rb, line 9</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">options</span>={})&#x000A;      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:key</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:creator</span>]&#x000A;      <span class="ruby-ivar">@condition</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:if</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:unless</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">raise</span>(<span class="ruby-constant">MissingConditionError</span>)&#x000A;      <span class="ruby-identifier">inherits</span>(<span class="ruby-constant">Validator</span>.<span class="ruby-identifier">validators</span>[<span class="ruby-ivar">@condition</span>]) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Validator</span>.<span class="ruby-identifier">validators</span>[<span class="ruby-ivar">@condition</span>]&#x000A;      <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidValidatorError</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@condition</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Proc</span>)&#x000A;      <span class="ruby-ivar">@optional</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:optional</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword kw">false</span>&#x000A;      <span class="ruby-ivar">@validation_proc</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:unless</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-operator">!</span> <span class="ruby-ivar">@condition</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">e</span>) } <span class="ruby-operator">:</span> <span class="ruby-ivar">@condition</span>&#x000A;      <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>&#x000A;      <span class="ruby-ivar">@message</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:message</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:message</span>]&#x000A;      <span class="ruby-ivar">@message</span> = <span class="ruby-identifier">default_message</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@message</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Proc</span>)&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M000009'>
                <a name='M000009'>      </a>
                <div class='synopsis'>
                  <span class='name'>register_validators</span>
                  <span class='arguments'>(validators)</span>
                </div>
                <div class='description'>
                  <p>
                  Registers validators which creators can reference as symbols in <a
                  href="Creator.html#M000011">Alias::Creator.valid</a>.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000009-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000009-source'><span class="ruby-comment cmt"># File lib/alias/validator.rb, line 58</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">register_validators</span>(<span class="ruby-identifier">validators</span>)&#x000A;        <span class="ruby-ivar">@validators</span> <span class="ruby-operator">||=</span> {}&#x000A;        <span class="ruby-identifier">validators</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>&#x000A;          <span class="ruby-ivar">@validators</span>[<span class="ruby-identifier">e</span>[<span class="ruby-identifier">:key</span>]] <span class="ruby-operator">||=</span> <span class="ruby-constant">Validator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">e</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:creator=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">self</span>))&#x000A;        <span class="ruby-keyword kw">end</span>&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='public-instance method' id='method-M000008'>
                <a name='M000008'>      </a>
                <div class='synopsis'>
                  <span class='name'>validate</span>
                  <span class='arguments'>(current_creator, alias_hash, current_attribute)</span>
                </div>
                <div class='description'>
                  <p>
                  Validates a given alias hash with the validator proc defined by :if or
                  :unless in <a href="Creator.html#M000011">Alias::Creator.valid</a>. Default
                  arguments that these procs receive works as follows: If the validation key
                  is the same name as any of the keys in the alias hash, then only the value
                  of that that alias key is passed to the procs. If not, then the whole alias
                  hash is passed.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000008-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000008-source'><span class="ruby-comment cmt"># File lib/alias/validator.rb, line 25</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validate</span>(<span class="ruby-identifier">current_creator</span>, <span class="ruby-identifier">alias_hash</span>, <span class="ruby-identifier">current_attribute</span>)&#x000A;      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@optional</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_creator</span>.<span class="ruby-identifier">force</span>&#x000A;      <span class="ruby-identifier">arg</span> = <span class="ruby-identifier">create_proc_arg</span>(<span class="ruby-identifier">alias_hash</span>, <span class="ruby-identifier">current_attribute</span>)&#x000A;      <span class="ruby-identifier">result</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-ivar">@validation_proc</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">arg</span>)&#x000A;      <span class="ruby-identifier">puts</span> <span class="ruby-identifier">create_message</span>(<span class="ruby-identifier">arg</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">true</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_creator</span>.<span class="ruby-identifier">verbose</span>&#x000A;      <span class="ruby-identifier">result</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
